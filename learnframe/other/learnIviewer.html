<!DOCTYPE html>

<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
	<meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1.0, maximum-scale=1, user-scalable=no" />
	<meta http-equiv="Pragma" content="no-cache"/>
	<meta http-equiv="Cache-Control" content="no-cache"/>
	<meta http-equiv="Expires" content="0"/>  
	<meta name="author" content="WU EVA" />
	<title>iviewer动画</title>
	<style>
		.iviewer_box{
			border: 1px solid;
			width: 600px;
			height: 500px;	
		}
		.iviewer_img{
			width: 100%;
			height: 500px;
			position: relative;
		}
		.AM_QH{
			cursor:pointer;
		}
		.btn-group.btn-group-lg{
			margin-left:auto; 
			margin-right:auto; 
		}
	</style>
  <link type="text/css" href="../../css/bootstrap.css" rel="stylesheet" type="text/css"/>	
	</head>
	<body>
		<div class="container">
			<div class="col-xs-3">
				<div class="panel panel-info">
					<div class="panel-heading">
						图片列表
					</div>
					<div class="panel-body">
							<ul class="imgList list-group">
							</ul>								
					</div>						
				</div>

			</div>
			<div class="col-xs-9">
					<div class="iviewer_img"></div>
					<div class="btn-group btn-group-lg">
							<button class="btn btn-info AM_ZXZ">左旋转</button>
							<button class="btn btn-info AM_YXZ">右旋转</button>
							<button class="btn btn-info AM_FD">放大</button>
							<button class="btn btn-info AM_SX">缩小</button>
							<button class="btn btn-info AM_SK">适宽</button>
							<button class="btn btn-info AM_SK">适宽</button>
					</div>				
			</div>
		</div>
	</body>
	<script type="text/javascript" src="../../js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="../../js/iviewer-fix/jquery.iviewer.js"></script>
	<script>
		var g_src,ImageArray,viewer;
		$(function () {
				initData();
		});

	//初始化相关数据
	function initData(){
		g_src = "https://static.bootcss.com/www/assets/img/";
		ImageArray =loadImageData();
		imgBox =$('.iviewer_img');
		loadImageList(ImageArray);
		initViewer(imgBox);
		setBtnFuc();
	}

	//初始化viewer事件
	function initViewer(imgBox){
		viewer = imgBox.iviewer({
					src: g_src+ImageArray[0].url,
					update_on_resize: false,
					onMouseMove: function (ev, coords) { }
			});
	}

	//加载图片列表
	function loadImageList(imageArray){
		var imgVar = "";
		if(imageArray.length>0){
			imageArray.forEach(function(element) {
				imgVar += "<li class='list-group-item AM_QH' img='"+element.url+"'>"+element.name+"</li>\n";				
			});
		}
		$(".imgList").html(imgVar);
	}

	//加载图片原始数据
	function loadImageData(){
		var ImageL =[{"name":"codeguide","url":"codeguide.png?1510078115427"},{"name":"yarn","url":"yarn.png?1510078115427"},{"name":"react","url":"react.png?1510078115427"},{"name":"webpack","url":"webpack.png?1510078115427"},{"name":"jqueryapi","url":"jqueryapi.png?1510078115427"},{"name":"w3schools","url":"w3schools.png?1510078115427"}];
		
		return ImageL;
	}
	//给按钮绑定相关事件
	function setBtnFuc(){
		$(".AM_QH").click(function(){
				var _this_url =$(this).attr("img");
					viewer.iviewer("loadImage",  g_src+_this_url);
			});
			//左旋转
			$(".AM_ZXZ").click(function () {
					if (viewer != null) {
							viewer.iviewer("angle", -90);
					}
			});

			//右旋转
			$(".AM_YXZ").click(function () {
					if (viewer != null) {
							viewer.iviewer("angle", 90);
					}
			});

			//放大
			$(".AM_FD").click(function () {
					if (viewer != null) {
							viewer.iviewer("zoom_by", 1);
					}
			});

			//缩小
			$(".AM_SX").click(function () {
					if (viewer != null) {
							viewer.iviewer("zoom_by", -1);
					}
			});

			//适宽
			$(".AM_SK").click(function () {
					if (viewer != null) {
							viewer.iviewer("set_zoom", 100);
					}
			});			

	}
	</script>
	</html>